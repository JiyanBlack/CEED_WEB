'use strict';

var sample = [{
    "geocoded_waypoints": [
        {
            "geocoder_status": "OK",
            "place_id": "ChIJeem5LP2kMioRlWjmckPJOkw",
            "types": ["route"]
        }, {
            "geocoder_status": "OK",
            "place_id": "ChIJhdQzVPqkMioRe2DN-FjP6cA",
            "types": ["bus_station", "establishment", "point_of_interest", "transit_station"]
        }
    ],
    "routes": [
        {
            "bounds": {
                "northeast": {
                    "lat": -31.9672633,
                    "lng": 115.8167616
                },
                "southwest": {
                    "lat": -31.9737911,
                    "lng": 115.8134561
                }
            },
            "copyrights": "Map data ©2016 Google",
            "legs": [
                {
                    "arrival_time": {
                        "text": "11:57am",
                        "time_zone": "Australia/Perth",
                        "value": 1480391820
                    },
                    "departure_time": {
                        "text": "11:53am",
                        "time_zone": "Australia/Perth",
                        "value": 1480391580
                    },
                    "distance": {
                        "text": "1.0 km",
                        "value": 1023
                    },
                    "duration": {
                        "text": "4 mins",
                        "value": 240
                    },
                    "end_address": "Hampden Rd After Karella St, Nedlands WA 6009",
                    "end_location": {
                        "lat": -31.9737911,
                        "lng": 115.8135194
                    },
                    "start_address": "Hospital Ave, Nedlands WA 6009, Australia",
                    "start_location": {
                        "lat": -31.9672633,
                        "lng": 115.8167616
                    },
                    "steps": [
                        {
                            "distance": {
                                "text": "1.0 km",
                                "value": 1023
                            },
                            "duration": {
                                "text": "4 mins",
                                "value": 240
                            },
                            "end_location": {
                                "lat": -31.9737911,
                                "lng": 115.8135194
                            },
                            "html_instructions": "Bus towards Crawley",
                            "polyline": {
                                "points": "jrbbEwm{aUDNBAJEZCf@?fB?T?TF\\FZFjAPbH@?l@?dC?lB?d@?t@?L?tA?lBB?B@B@@BBB?D?@lA?p" +
                                    "@?h@?nC?zC?nC?B?D??K"
                            },
                            "start_location": {
                                "lat": -31.9672633,
                                "lng": 115.8167616
                            },
                            "transit_details": {
                                "arrival_stop": {
                                    "location": {
                                        "lat": -31.9737911,
                                        "lng": 115.8135194
                                    },
                                    "name": "Hampden Rd After Karella St"
                                },
                                "arrival_time": {
                                    "text": "11:57am",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480391820
                                },
                                "departure_stop": {
                                    "location": {
                                        "lat": -31.9672633,
                                        "lng": 115.8167616
                                    },
                                    "name": "Hospital Av Qeii Medical Centre"
                                },
                                "departure_time": {
                                    "text": "11:53am",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480391580
                                },
                                "headsign": "Crawley",
                                "line": {
                                    "agencies": [
                                        {
                                            "name": "Transperth",
                                            "url": "http://www.transperth.wa.gov.au/"
                                        }
                                    ],
                                    "color": "#002f6c",
                                    "short_name": "97",
                                    "text_color": "#ffffff",
                                    "url": "http://www.transperth.wa.gov.au/timetables/details?Bus=97",
                                    "vehicle": {
                                        "icon": "//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png",
                                        "name": "Bus",
                                        "type": "BUS"
                                    }
                                },
                                "num_stops": 3
                            },
                            "travel_mode": "TRANSIT"
                        }
                    ],
                    "traffic_speed_entry": [],
                    "via_waypoint": []
                }
            ],
            "overview_polyline": {
                "points": "jrbbEwm{aUDNNGbAC|B?zCh@bH@?l@?rF?zA?bB?lBB?FBDF?F~B?tI?rC?D??K"
            },
            "summary": "",
            "warnings": [],
            "waypoint_order": []
        }, {
            "bounds": {
                "northeast": {
                    "lat": -31.9672633,
                    "lng": 115.8167616
                },
                "southwest": {
                    "lat": -31.9737911,
                    "lng": 115.8134561
                }
            },
            "copyrights": "Map data ©2016 Google",
            "legs": [
                {
                    "arrival_time": {
                        "text": "11:58am",
                        "time_zone": "Australia/Perth",
                        "value": 1480391880
                    },
                    "departure_time": {
                        "text": "11:55am",
                        "time_zone": "Australia/Perth",
                        "value": 1480391700
                    },
                    "distance": {
                        "text": "1.0 km",
                        "value": 1023
                    },
                    "duration": {
                        "text": "3 mins",
                        "value": 180
                    },
                    "end_address": "Hampden Rd After Karella St, Nedlands WA 6009",
                    "end_location": {
                        "lat": -31.9737911,
                        "lng": 115.8135194
                    },
                    "start_address": "Hospital Ave, Nedlands WA 6009, Australia",
                    "start_location": {
                        "lat": -31.9672633,
                        "lng": 115.8167616
                    },
                    "steps": [
                        {
                            "distance": {
                                "text": "1.0 km",
                                "value": 1023
                            },
                            "duration": {
                                "text": "3 mins",
                                "value": 180
                            },
                            "end_location": {
                                "lat": -31.9737911,
                                "lng": 115.8135194
                            },
                            "html_instructions": "Bus towards Fremantle Stn",
                            "polyline": {
                                "points": "jrbbEwm{aUDNBAJEZCf@?fB?T?TF\\FZFjAPbH@?l@?dC?lB?d@?t@?L?tA?lBB?B@B@@BBB?D?@lA?p" +
                                    "@?h@?nC?zC?nC?B?D??K"
                            },
                            "start_location": {
                                "lat": -31.9672633,
                                "lng": 115.8167616
                            },
                            "transit_details": {
                                "arrival_stop": {
                                    "location": {
                                        "lat": -31.9737911,
                                        "lng": 115.8135194
                                    },
                                    "name": "Hampden Rd After Karella St"
                                },
                                "arrival_time": {
                                    "text": "11:58am",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480391880
                                },
                                "departure_stop": {
                                    "location": {
                                        "lat": -31.9672633,
                                        "lng": 115.8167616
                                    },
                                    "name": "Hospital Av Qeii Medical Centre"
                                },
                                "departure_time": {
                                    "text": "11:55am",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480391700
                                },
                                "headsign": "Fremantle Stn",
                                "line": {
                                    "agencies": [
                                        {
                                            "name": "Transperth",
                                            "url": "http://www.transperth.wa.gov.au/"
                                        }
                                    ],
                                    "color": "#002f6c",
                                    "short_name": "103",
                                    "text_color": "#ffffff",
                                    "url": "http://www.transperth.wa.gov.au/timetables/details?Bus=103",
                                    "vehicle": {
                                        "icon": "//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png",
                                        "name": "Bus",
                                        "type": "BUS"
                                    }
                                },
                                "num_stops": 3
                            },
                            "travel_mode": "TRANSIT"
                        }
                    ],
                    "traffic_speed_entry": [],
                    "via_waypoint": []
                }
            ],
            "overview_polyline": {
                "points": "jrbbEwm{aUDNNGbAC|B?zCh@bH@?l@?rF?zA?bB?lBB?FBDF?F~B?tI?rC?D??K"
            },
            "summary": "",
            "warnings": [],
            "waypoint_order": []
        }, {
            "bounds": {
                "northeast": {
                    "lat": -31.9672633,
                    "lng": 115.8167616
                },
                "southwest": {
                    "lat": -31.9737911,
                    "lng": 115.8134561
                }
            },
            "copyrights": "Map data ©2016 Google",
            "legs": [
                {
                    "arrival_time": {
                        "text": "11:59am",
                        "time_zone": "Australia/Perth",
                        "value": 1480391940
                    },
                    "departure_time": {
                        "text": "11:56am",
                        "time_zone": "Australia/Perth",
                        "value": 1480391760
                    },
                    "distance": {
                        "text": "1.0 km",
                        "value": 1023
                    },
                    "duration": {
                        "text": "3 mins",
                        "value": 180
                    },
                    "end_address": "Hampden Rd After Karella St, Nedlands WA 6009",
                    "end_location": {
                        "lat": -31.9737911,
                        "lng": 115.8135194
                    },
                    "start_address": "Hospital Ave, Nedlands WA 6009, Australia",
                    "start_location": {
                        "lat": -31.9672633,
                        "lng": 115.8167616
                    },
                    "steps": [
                        {
                            "distance": {
                                "text": "1.0 km",
                                "value": 1023
                            },
                            "duration": {
                                "text": "3 mins",
                                "value": 180
                            },
                            "end_location": {
                                "lat": -31.9737911,
                                "lng": 115.8135194
                            },
                            "html_instructions": "Bus towards Morley Bus Stn",
                            "polyline": {
                                "points": "jrbbEwm{aUDNBAJEZCf@?fB?T?TF\\FZFjAPbH@?l@?dC?lB?d@?t@?L?tA?lBB?B@B@@BBB?D?@lA?p" +
                                    "@?h@?nC?zC?nC?B?D??K"
                            },
                            "start_location": {
                                "lat": -31.9672633,
                                "lng": 115.8167616
                            },
                            "transit_details": {
                                "arrival_stop": {
                                    "location": {
                                        "lat": -31.9737911,
                                        "lng": 115.8135194
                                    },
                                    "name": "Hampden Rd After Karella St"
                                },
                                "arrival_time": {
                                    "text": "11:59am",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480391940
                                },
                                "departure_stop": {
                                    "location": {
                                        "lat": -31.9672633,
                                        "lng": 115.8167616
                                    },
                                    "name": "Hospital Av Qeii Medical Centre"
                                },
                                "departure_time": {
                                    "text": "11:56am",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480391760
                                },
                                "headsign": "Morley Bus Stn",
                                "line": {
                                    "agencies": [
                                        {
                                            "name": "Transperth",
                                            "url": "http://www.transperth.wa.gov.au/"
                                        }
                                    ],
                                    "color": "#009639",
                                    "short_name": "950",
                                    "text_color": "#ffffff",
                                    "url": "http://www.transperth.wa.gov.au/timetables/details?Bus=950",
                                    "vehicle": {
                                        "icon": "//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png",
                                        "name": "Bus",
                                        "type": "BUS"
                                    }
                                },
                                "num_stops": 3
                            },
                            "travel_mode": "TRANSIT"
                        }
                    ],
                    "traffic_speed_entry": [],
                    "via_waypoint": []
                }
            ],
            "overview_polyline": {
                "points": "jrbbEwm{aUDNBAJEZCnC?T?TFx@NjAPbH@?rD?rC?xC?lBB?FBDNhD?~L?D??K"
            },
            "summary": "",
            "warnings": [],
            "waypoint_order": []
        }, {
            "bounds": {
                "northeast": {
                    "lat": -31.9672633,
                    "lng": 115.8167616
                },
                "southwest": {
                    "lat": -31.9737911,
                    "lng": 115.8134561
                }
            },
            "copyrights": "Map data ©2016 Google",
            "legs": [
                {
                    "arrival_time": {
                        "text": "12:06pm",
                        "time_zone": "Australia/Perth",
                        "value": 1480392360
                    },
                    "departure_time": {
                        "text": "12:03pm",
                        "time_zone": "Australia/Perth",
                        "value": 1480392180
                    },
                    "distance": {
                        "text": "1.0 km",
                        "value": 1023
                    },
                    "duration": {
                        "text": "3 mins",
                        "value": 180
                    },
                    "end_address": "Hampden Rd After Karella St, Nedlands WA 6009",
                    "end_location": {
                        "lat": -31.9737911,
                        "lng": 115.8135194
                    },
                    "start_address": "Hospital Ave, Nedlands WA 6009, Australia",
                    "start_location": {
                        "lat": -31.9672633,
                        "lng": 115.8167616
                    },
                    "steps": [
                        {
                            "distance": {
                                "text": "1.0 km",
                                "value": 1023
                            },
                            "duration": {
                                "text": "3 mins",
                                "value": 180
                            },
                            "end_location": {
                                "lat": -31.9737911,
                                "lng": 115.8135194
                            },
                            "html_instructions": "Bus towards Morley Bus Stn",
                            "polyline": {
                                "points": "jrbbEwm{aUDNBAJEZCf@?fB?T?TF\\FZFjAPbH@?l@?dC?lB?d@?t@?L?tA?lBB?B@B@@BBB?D?@lA?p" +
                                    "@?h@?nC?zC?nC?B?D??K"
                            },
                            "start_location": {
                                "lat": -31.9672633,
                                "lng": 115.8167616
                            },
                            "transit_details": {
                                "arrival_stop": {
                                    "location": {
                                        "lat": -31.9737911,
                                        "lng": 115.8135194
                                    },
                                    "name": "Hampden Rd After Karella St"
                                },
                                "arrival_time": {
                                    "text": "12:06pm",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480392360
                                },
                                "departure_stop": {
                                    "location": {
                                        "lat": -31.9672633,
                                        "lng": 115.8167616
                                    },
                                    "name": "Hospital Av Qeii Medical Centre"
                                },
                                "departure_time": {
                                    "text": "12:03pm",
                                    "time_zone": "Australia/Perth",
                                    "value": 1480392180
                                },
                                "headsign": "Morley Bus Stn",
                                "line": {
                                    "agencies": [
                                        {
                                            "name": "Transperth",
                                            "url": "http://www.transperth.wa.gov.au/"
                                        }
                                    ],
                                    "color": "#009639",
                                    "short_name": "950",
                                    "text_color": "#ffffff",
                                    "url": "http://www.transperth.wa.gov.au/timetables/details?Bus=950",
                                    "vehicle": {
                                        "icon": "//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png",
                                        "name": "Bus",
                                        "type": "BUS"
                                    }
                                },
                                "num_stops": 3
                            },
                            "travel_mode": "TRANSIT"
                        }
                    ],
                    "traffic_speed_entry": [],
                    "via_waypoint": []
                }
            ],
            "overview_polyline": {
                "points": "jrbbEwm{aUDNBAJEZCnC?T?TFx@NjAPbH@?rD?rC?xC?lBB?FBDNhD?~L?D??K"
            },
            "summary": "",
            "warnings": [],
            "waypoint_order": []
        }
    ],
    "status": "OK"
},{"geocoded_waypoints":[{"place_id":"EjQxNDAtMTUwIFN0IEdlb3JnZXMgVGVycmFjZSwgUGVydGggV0EgNjAwMCwgQXVzdHJhbGlh","types":["street_address"],"geocoder_status":"OK"},{"place_id":"ChIJzVIIkCa7MioRzPzTLq5kqSE","types":["bus_station","establishment","point_of_interest","transit_station"],"geocoder_status":"OK"}],"status":"OK","routes":[{"waypoint_order":[],"summary":"","bounds":{"southwest":{"lng":115.8559964,"lat":-31.9584913},"northeast":{"lng":115.8677606,"lat":-31.9544563}},"copyrights":"Map data \u00a92016 Google","warnings":[],"overview_polyline":{"points":"jb`bEgccbUPFbBqHpCyL`H}Z^wA\\oAZw@nBcIp@yCSG"},"legs":[{"steps":[{"end_location":{"lng":115.8677606,"lat":-31.9583928},"transit_details":{"departure_time":{"value":1480498200,"text":"5:30pm","time_zone":"Australia/Perth"},"arrival_stop":{"name":"Adelaide Tce Before Hill St","location":{"lng":115.8677606,"lat":-31.9583928}},"headsign":"Belmont","departure_stop":{"name":"St Georges Tce Before William St Eastbound","location":{"lng":115.8560381,"lat":-31.9544563}},"line":{"short_name":"935","vehicle":{"type":"BUS","name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png"},"text_color":"#ffffff","color":"#880e4f","url":"http://www.transperth.wa.gov.au/timetables/details?Bus=935","agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}]},"num_stops":4,"arrival_time":{"value":1480498500,"text":"5:35pm","time_zone":"Australia/Perth"}},"polyline":{"points":"jb`bEgccbUPF^cBbAmET_An@sCjAeFt@eDhAeFd@sBl@kC^aBf@{BDS^wA\\oAZw@l@}B`AeEp@yCSG"},"html_instructions":"Bus towards Belmont","travel_mode":"TRANSIT","duration":{"text":"5 mins","value":300},"start_location":{"lng":115.8560381,"lat":-31.9544563},"distance":{"text":"1.2 km","value":1212}}],"departure_time":{"value":1480498200,"text":"5:30pm","time_zone":"Australia/Perth"},"end_location":{"lng":115.8677606,"lat":-31.9583928},"traffic_speed_entry":[],"arrival_time":{"value":1480498500,"text":"5:35pm","time_zone":"Australia/Perth"},"via_waypoint":[],"duration":{"text":"5 mins","value":300},"end_address":"Adelaide Tce Before Hill St, Perth WA 6000","start_location":{"lng":115.8560381,"lat":-31.9544563},"distance":{"text":"1.2 km","value":1212},"start_address":"140-150 St Georges Terrace, Perth WA 6000, Australia"}]},{"waypoint_order":[],"summary":"","bounds":{"southwest":{"lng":115.8556015,"lat":-31.9584913},"northeast":{"lng":115.8677606,"lat":-31.9543274}},"copyrights":"Map data \u00a92016 Google","warnings":[],"overview_polyline":{"points":"pa`bEw`cbUPF|BaKpCyLvG}Yh@wB\\oAZw@nBcIp@yCSG"},"legs":[{"steps":[{"end_location":{"lng":115.8677606,"lat":-31.9583928},"transit_details":{"departure_time":{"value":1480498260,"text":"5:31pm","time_zone":"Australia/Perth"},"arrival_stop":{"name":"Adelaide Tce Before Hill St","location":{"lng":115.8677606,"lat":-31.9583928}},"headsign":"East Perth","departure_stop":{"name":"St Georges Tce Before William St Eastbound","location":{"lng":115.855644,"lat":-31.9543274}},"line":{"short_name":"24","vehicle":{"type":"BUS","name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png"},"text_color":"#ffffff","color":"#002f6c","url":"http://www.transperth.wa.gov.au/timetables/details?Bus=24","agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}]},"num_stops":4,"arrival_time":{"value":1480498620,"text":"5:37pm","time_zone":"Australia/Perth"}},"polyline":{"points":"pa`bEw`cbUPFx@sDbAmET_An@sCjAeFt@eDt@eDR_ArA_G^aBb@oBBKd@kB\\oAZw@l@}B`AeEp@yCSG"},"html_instructions":"Bus towards East Perth","travel_mode":"TRANSIT","duration":{"text":"6 mins","value":360},"start_location":{"lng":115.855644,"lat":-31.9543274},"distance":{"text":"1.3 km","value":1252}}],"departure_time":{"value":1480498260,"text":"5:31pm","time_zone":"Australia/Perth"},"end_location":{"lng":115.8677606,"lat":-31.9583928},"traffic_speed_entry":[],"arrival_time":{"value":1480498620,"text":"5:37pm","time_zone":"Australia/Perth"},"via_waypoint":[],"duration":{"text":"6 mins","value":360},"end_address":"Adelaide Tce Before Hill St, Perth WA 6000","start_location":{"lng":115.855644,"lat":-31.9543274},"distance":{"text":"1.3 km","value":1252},"start_address":"140-150 St Georges Terrace, Perth WA 6000, Australia"}]},{"waypoint_order":[],"summary":"","bounds":{"southwest":{"lng":115.8559964,"lat":-31.9584913},"northeast":{"lng":115.8677606,"lat":-31.9544563}},"copyrights":"Map data \u00a92016 Google","warnings":[],"overview_polyline":{"points":"jb`bEgccbUPFbBqHpCyL`H}Z^wA\\oAZw@nBcIp@yCSG"},"legs":[{"steps":[{"end_location":{"lng":115.8677606,"lat":-31.9583928},"transit_details":{"departure_time":{"value":1480498380,"text":"5:33pm","time_zone":"Australia/Perth"},"arrival_stop":{"name":"Adelaide Tce Before Hill St","location":{"lng":115.8677606,"lat":-31.9583928}},"headsign":"Perth Airport T3 And T4","departure_stop":{"name":"St Georges Tce Before William St Eastbound","location":{"lng":115.8560381,"lat":-31.9544563}},"line":{"short_name":"40","vehicle":{"type":"BUS","name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png"},"text_color":"#ffffff","color":"#880e4f","url":"http://www.transperth.wa.gov.au/timetables/details?Bus=40","agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}]},"num_stops":4,"arrival_time":{"value":1480498680,"text":"5:38pm","time_zone":"Australia/Perth"}},"polyline":{"points":"jb`bEgccbUPF^cBbAmET_An@sCjAeFt@eDhAeFd@sBl@kC^aBf@{BDS^wA\\oAZw@l@}B`AeEp@yCSG"},"html_instructions":"Bus towards Perth Airport T3 And T4","travel_mode":"TRANSIT","duration":{"text":"5 mins","value":300},"start_location":{"lng":115.8560381,"lat":-31.9544563},"distance":{"text":"1.2 km","value":1212}}],"departure_time":{"value":1480498380,"text":"5:33pm","time_zone":"Australia/Perth"},"end_location":{"lng":115.8677606,"lat":-31.9583928},"traffic_speed_entry":[],"arrival_time":{"value":1480498680,"text":"5:38pm","time_zone":"Australia/Perth"},"via_waypoint":[],"duration":{"text":"5 mins","value":300},"end_address":"Adelaide Tce Before Hill St, Perth WA 6000","start_location":{"lng":115.8560381,"lat":-31.9544563},"distance":{"text":"1.2 km","value":1212},"start_address":"140-150 St Georges Terrace, Perth WA 6000, Australia"}]},{"waypoint_order":[],"summary":"","bounds":{"southwest":{"lng":115.8559964,"lat":-31.9584913},"northeast":{"lng":115.8677606,"lat":-31.9544563}},"copyrights":"Map data \u00a92016 Google","warnings":[],"overview_polyline":{"points":"jb`bEgccbUPFbBqHpCyL`H}Z^wA\\oAZw@nBcIp@yCSG"},"legs":[{"steps":[{"end_location":{"lng":115.8677606,"lat":-31.9583928},"transit_details":{"departure_time":{"value":1480498500,"text":"5:35pm","time_zone":"Australia/Perth"},"arrival_stop":{"name":"Adelaide Tce Before Hill St","location":{"lng":115.8677606,"lat":-31.9583928}},"headsign":"Perth Airport T3 And T4","departure_stop":{"name":"St Georges Tce Before William St Eastbound","location":{"lng":115.8560381,"lat":-31.9544563}},"line":{"short_name":"935","vehicle":{"type":"BUS","name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png"},"text_color":"#ffffff","color":"#880e4f","url":"http://www.transperth.wa.gov.au/timetables/details?Bus=935","agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}]},"num_stops":4,"arrival_time":{"value":1480498800,"text":"5:40pm","time_zone":"Australia/Perth"}},"polyline":{"points":"jb`bEgccbUPF^cBbAmET_An@sCjAeFt@eDhAeFd@sBl@kC^aBf@{BDS^wA\\oAZw@l@}B`AeEp@yCSG"},"html_instructions":"Bus towards Perth Airport T3 And T4","travel_mode":"TRANSIT","duration":{"text":"5 mins","value":300},"start_location":{"lng":115.8560381,"lat":-31.9544563},"distance":{"text":"1.2 km","value":1212}}],"departure_time":{"value":1480498500,"text":"5:35pm","time_zone":"Australia/Perth"},"end_location":{"lng":115.8677606,"lat":-31.9583928},"traffic_speed_entry":[],"arrival_time":{"value":1480498800,"text":"5:40pm","time_zone":"Australia/Perth"},"via_waypoint":[],"duration":{"text":"5 mins","value":300},"end_address":"Adelaide Tce Before Hill St, Perth WA 6000","start_location":{"lng":115.8560381,"lat":-31.9544563},"distance":{"text":"1.2 km","value":1212},"start_address":"140-150 St Georges Terrace, Perth WA 6000, Australia"}]}]}
,
{"status":"OK","geocoded_waypoints":[{"geocoder_status":"OK","place_id":"ChIJxd8TB2a6MioRCT20uweP_b4","types":["bus_station","establishment","point_of_interest","transit_station"]},{"geocoder_status":"OK","place_id":"ChIJm35R3X2wMioRZ9HJp3lGw38","types":["bus_station","establishment","point_of_interest","transit_station"]}],"routes":[{"bounds":{"northeast":{"lng":115.9108563,"lat":-31.8986058},"southwest":{"lng":115.894355,"lat":-31.9179948}},"waypoint_order":[],"warnings":[],"summary":"","legs":[{"end_location":{"lng":115.8981122,"lat":-31.8986372},"departure_time":{"value":1480499700,"time_zone":"Australia/Perth","text":"5:55pm"},"distance":{"value":3044,"text":"3.0 km"},"arrival_time":{"value":1480500300,"time_zone":"Australia/Perth","text":"6:05pm"},"start_address":"Coode St Before Mills Av, Bayswater WA 6053","steps":[{"html_instructions":"Bus towards Morley Bus Stn","end_location":{"lng":115.8981122,"lat":-31.8986372},"distance":{"value":3044,"text":"3.0 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.9107987,"lat":-31.9179948},"polyline":{"points":"l~xaEoymbUGKo@x@qCdDwBlC{BpCgAtAA?k@t@qChDcCzCqHdJmA|AwBbCwBnCkAzAiAtAcCvCwBpCMLeBpBUVgAtAuF~GmCfDgJhLuCiDiB}Bi@o@eGsHkEmFsCjDU[QU][QYq@|@DF"},"duration":{"value":600,"text":"10 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"999","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=999","text_color":"#ffffff","color":"#00838f"},"arrival_time":{"value":1480500300,"time_zone":"Australia/Perth","text":"6:05pm"},"headsign":"Morley Bus Stn","num_stops":5,"arrival_stop":{"name":"Morley Bus Station","location":{"lng":115.8981122,"lat":-31.8986372}},"departure_time":{"value":1480499700,"time_zone":"Australia/Perth","text":"5:55pm"},"departure_stop":{"name":"Coode St Before Mills Av","location":{"lng":115.9107987,"lat":-31.9179948}}}}],"start_location":{"lng":115.9107987,"lat":-31.9179948},"end_address":"Morley Bus Station, Morley WA 6062","via_waypoint":[],"duration":{"value":600,"text":"10 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"l~xaEoymbUGKaE~E}HtJsR`VeE`FwBnCqKzMqElFkVpZiHwIqMaPsCjDU[o@q@QYq@|@DF"},"copyrights":"Map data \u00a92016 Google"},{"bounds":{"northeast":{"lng":115.9144667,"lat":-31.89477},"southwest":{"lng":115.8944344,"lat":-31.9179962}},"waypoint_order":[],"warnings":["Walking directions are in beta.    Use caution \u2013 This route may be missing sidewalks or pedestrian paths."],"summary":"","legs":[{"end_location":{"lng":115.8978828,"lat":-31.8987556},"departure_time":{"value":1480499291,"time_zone":"Australia/Perth","text":"5:48pm"},"distance":{"value":6053,"text":"6.1 km"},"arrival_time":{"value":1480500660,"time_zone":"Australia/Perth","text":"6:11pm"},"start_address":"Coode St Before Mills Av, Bayswater WA 6053","steps":[{"html_instructions":"Walk to Francis St After Coode St","end_location":{"lng":115.9088909,"lat":-31.91521599999999},"distance":{"value":437,"text":"0.4 km"},"travel_mode":"WALKING","steps":[{"html_instructions":"Head <b>northwest</b> on <b>Coode St</b> toward <b>Mills Ave</b>","end_location":{"lng":115.9082731,"lat":-31.9157517},"distance":{"value":353,"text":"0.4 km"},"travel_mode":"WALKING","start_location":{"lng":115.9109157,"lat":-31.9179962},"polyline":{"points":"n~xaEgzmbU]`@a@f@gCbD_CpCyBpC"},"duration":{"value":283,"text":"5 mins"}},{"html_instructions":"Turn <b>right</b> onto <b>Francis St</b><div style=\"font-size:0.9em\">Destination will be on the left</div>","end_location":{"lng":115.9088909,"lat":-31.91521599999999},"duration":{"value":66,"text":"1 min"},"travel_mode":"WALKING","start_location":{"lng":115.9082731,"lat":-31.9157517},"distance":{"value":84,"text":"84 m"},"polyline":{"points":"lpxaEuimbUEKIKwAgBAB"},"maneuver":"turn-right"}],"start_location":{"lng":115.9109157,"lat":-31.9179962},"polyline":{"points":"n~xaEgzmbU]`@a@f@gCbD_CpCyBpCEKIKwAgBAB"},"duration":{"value":349,"text":"6 mins"}},{"html_instructions":"Bus towards Morley Bus Stn","end_location":{"lng":115.8978828,"lat":-31.8987556},"distance":{"value":5616,"text":"5.6 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.9088909,"lat":-31.91521599999999},"polyline":{"points":"bmxaEqmmbUBEwD}EgBzBwGfIa@f@@@?@@@?@@@?@?B?@?@?@?BA@?@A@A@?@A@A@A?A@A?A?A?A?A?C?AAAAA??AAAAA?AAA?CAA?A?A?C@A?A?A@A?A@CqA_BW[uBkCc@g@wBkCyBmC?A_@e@yCqDsCwDk@u@yAoBuEnFs@}@uAaBHK?A}BsCaAiAWW_@Q{A[UzB]dDc@rEqB_@cBY_Ee@qDi@}Cc@gDg@WtBKzAc@pEw@zHQE{@Mq@Cm@H}@VR|@^jA`@hAf@fAd@|@f@|@f@r@@DNNORoA~AGJW`@Sv@ARGhAe@xEKAKA}Dk@kBW{Dk@ArBAfB?bA@n@BZ@j@?^AV?d@?\\?xB?T?fC?bA?pA?P?rB?BA`CA`B?l@Bl@Bf@TzAHZ`@jA`@~@Pf@`@~@JRBFTh@NZZp@`@v@Zp@nCgDj@s@fAuARWz@eA|BoCBEBC`@g@zAkBU[QU][QYuAhBPX\\ZZa@II"},"duration":{"value":1020,"text":"17 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"48","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=48","text_color":"#ffffff","color":"#880e4f"},"arrival_time":{"value":1480500660,"time_zone":"Australia/Perth","text":"6:11pm"},"headsign":"Morley Bus Stn","num_stops":17,"arrival_stop":{"name":"Morley Bus Station","location":{"lng":115.8978828,"lat":-31.8987556}},"departure_time":{"value":1480499640,"time_zone":"Australia/Perth","text":"5:54pm"},"departure_stop":{"name":"Francis St After Coode St","location":{"lng":115.9088909,"lat":-31.91521599999999}}}}],"start_location":{"lng":115.9109157,"lat":-31.9179962},"end_address":"Morley Bus Station, Morley WA 6062","via_waypoint":[],"duration":{"value":1369,"text":"23 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"n~xaEgzmbU_AhAgCbD_CpCyBpCEKaBsBABBEwD}EgBzBwGfI_@h@BF?HGPOBMIAS@G@CqA_BqDoEqGaIyCqDsCwDk@u@yAoBuEnFs@}@uAaBHK}BuCyAaB_@Q{A[UzBaAxJqB_@cBY_Ee@oImAgDg@WtBKzAc@pEw@zHQE{@Mq@Cm@H}@Vr@hChApClAzBh@x@NNORwAjBW`@UjAGhAe@xEWC}Dk@gHcAArBAjDDjA?hC?|MCzIBzABf@TzAj@fBr@fBp@zAbBnDZp@nCgDj@s@tGcIdC}Cg@q@][QYuAhBPX\\ZZa@II"},"copyrights":"Map data \u00a92016 Google"},{"bounds":{"northeast":{"lng":115.9108563,"lat":-31.8986058},"southwest":{"lng":115.894355,"lat":-31.9179948}},"waypoint_order":[],"warnings":[],"summary":"","legs":[{"end_location":{"lng":115.8981122,"lat":-31.8986372},"departure_time":{"value":1480500420,"time_zone":"Australia/Perth","text":"6:07pm"},"distance":{"value":3044,"text":"3.0 km"},"arrival_time":{"value":1480501320,"time_zone":"Australia/Perth","text":"6:22pm"},"start_address":"Coode St Before Mills Av, Bayswater WA 6053","steps":[{"html_instructions":"Bus towards Fremantle Stn","end_location":{"lng":115.8981122,"lat":-31.8986372},"distance":{"value":3044,"text":"3.0 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.9107987,"lat":-31.9179948},"polyline":{"points":"l~xaEoymbUGKo@x@qCdDwBlC{BpCgAtAA?k@t@qChDcCzCqHdJmA|AwBbCwBnCkAzAiAtAcCvCwBpCMLeBpBUVgAtAuF~GmCfDgJhLuCiDiB}Bi@o@eGsHkEmFsCjDU[QU][QYq@|@DF"},"duration":{"value":900,"text":"15 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"999","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=999","text_color":"#ffffff","color":"#00838f"},"arrival_time":{"value":1480501320,"time_zone":"Australia/Perth","text":"6:22pm"},"headsign":"Fremantle Stn","num_stops":5,"arrival_stop":{"name":"Morley Bus Station","location":{"lng":115.8981122,"lat":-31.8986372}},"departure_time":{"value":1480500420,"time_zone":"Australia/Perth","text":"6:07pm"},"departure_stop":{"name":"Coode St Before Mills Av","location":{"lng":115.9107987,"lat":-31.9179948}}}}],"start_location":{"lng":115.9107987,"lat":-31.9179948},"end_address":"Morley Bus Station, Morley WA 6062","via_waypoint":[],"duration":{"value":900,"text":"15 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"l~xaEoymbUGKaE~E}HtJsR`VeE`FwBnCqKzMqElFkVpZiHwIqMaPsCjDU[o@q@QYq@|@DF"},"copyrights":"Map data \u00a92016 Google"},{"bounds":{"northeast":{"lng":115.9108563,"lat":-31.8986058},"southwest":{"lng":115.894355,"lat":-31.9179948}},"waypoint_order":[],"warnings":[],"summary":"","legs":[{"end_location":{"lng":115.8981122,"lat":-31.8986372},"departure_time":{"value":1480501320,"time_zone":"Australia/Perth","text":"6:22pm"},"distance":{"value":3044,"text":"3.0 km"},"arrival_time":{"value":1480502220,"time_zone":"Australia/Perth","text":"6:37pm"},"start_address":"Coode St Before Mills Av, Bayswater WA 6053","steps":[{"html_instructions":"Bus towards Stirling Stn","end_location":{"lng":115.8981122,"lat":-31.8986372},"distance":{"value":3044,"text":"3.0 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.9107987,"lat":-31.9179948},"polyline":{"points":"l~xaEoymbUGKo@x@qCdDwBlC{BpCgAtAA?k@t@qChDcCzCqHdJmA|AwBbCwBnCkAzAiAtAcCvCwBpCMLeBpBUVgAtAuF~GmCfDgJhLuCiDiB}Bi@o@eGsHkEmFsCjDU[QU][QYq@|@DF"},"duration":{"value":900,"text":"15 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"999","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=999","text_color":"#ffffff","color":"#00838f"},"arrival_time":{"value":1480502220,"time_zone":"Australia/Perth","text":"6:37pm"},"headsign":"Stirling Stn","num_stops":5,"arrival_stop":{"name":"Morley Bus Station","location":{"lng":115.8981122,"lat":-31.8986372}},"departure_time":{"value":1480501320,"time_zone":"Australia/Perth","text":"6:22pm"},"departure_stop":{"name":"Coode St Before Mills Av","location":{"lng":115.9107987,"lat":-31.9179948}}}}],"start_location":{"lng":115.9107987,"lat":-31.9179948},"end_address":"Morley Bus Station, Morley WA 6062","via_waypoint":[],"duration":{"value":900,"text":"15 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"l~xaEoymbUGKaE~E}HtJsR`VeE`FwBnCqKzMqElFkVpZiHwIqMaPsCjDU[o@q@QYq@|@DF"},"copyrights":"Map data \u00a92016 Google"}]},

{"status":"OK","geocoded_waypoints":[{"geocoder_status":"OK","place_id":"ChIJb2OAQmSrMioRquD7lnElI74","types":["bus_station","establishment","point_of_interest","transit_station"]},{"geocoder_status":"OK","place_id":"ChIJNwWG3PSsMioR4ETbQ7bwBB0","types":["bus_station","establishment","point_of_interest","train_station","transit_station"]}],"routes":[{"bounds":{"northeast":{"lng":115.7843122,"lat":-31.7936889},"southwest":{"lng":115.7496733,"lat":-31.8005683}},"waypoint_order":[],"warnings":[],"summary":"","legs":[{"end_location":{"lng":115.7822722,"lat":-31.7994017},"departure_time":{"value":1480498920,"time_zone":"Australia/Perth","text":"5:42pm"},"distance":{"value":4070,"text":"4.1 km"},"arrival_time":{"value":1480499640,"time_zone":"Australia/Perth","text":"5:54pm"},"start_address":"Whitfords Av Before Dampier Av, Hillarys WA 6025","steps":[{"html_instructions":"Bus towards Whitfords Stn","end_location":{"lng":115.7822722,"lat":-31.7994017},"distance":{"value":4070,"text":"4.1 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.7496733,"lat":-31.7952256},"polyline":{"points":"d_aaEmjnaULEEYKq@Gg@AYAc@C[EYM]CCAECEAE?G?E?E@GFWBKBa@Aq@?g@@m@TeCLcAP{@RiANm@T_AjA}ELm@b@kBRcANcAL{BB_AAeAMwBUeBOs@sB}IMe@uDiOA?oAiF}@cE]wBEg@E_@GiAEeA?gA?eADkAHeAX}BPcAXeARw@t@uBvBcFnBoE|@uBrCqGDMP_@jCmGHSBE@Ct@{Bh@cCPcALuAB{@DsA@sAAsAEsAEcAKqBWgFHYFMfASZG\\K\\GVGXOBC@AB?BAB?@@B?@?p@RXNpA\\ZLNNPR@AB?B?B@@@B@@@@B@@@B@B?D?B?BABABA@A@IPOTOPa@b@Sd@Of@KTq@@y@BgABI@GHAJ?@@HFFF@nAA?A"},"duration":{"value":720,"text":"12 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"441","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=441","text_color":"#000000","color":"#949300"},"arrival_time":{"value":1480499640,"time_zone":"Australia/Perth","text":"5:54pm"},"headsign":"Whitfords Stn","num_stops":8,"arrival_stop":{"name":"Whitfords","location":{"lng":115.7822722,"lat":-31.7994017}},"departure_time":{"value":1480498920,"time_zone":"Australia/Perth","text":"5:42pm"},"departure_stop":{"name":"Whitfords Av - Whitfords City Shop Ctre","location":{"lng":115.7496733,"lat":-31.7952256}}}}],"start_location":{"lng":115.7496733,"lat":-31.7952256},"end_address":"Whitfords, Kingsley WA 6026, Australia","via_waypoint":[],"duration":{"value":720,"text":"12 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"d_aaEmjnaULEEYSyAC}@Iu@Wm@AYH_@Fm@AyA@m@TeC^_Cb@wBnBkIv@oDNcAL{B@eCMwBUeBcCqKMe@wDiOoAiF}@cEc@_DE_@MoC?mCNqCj@aEXeARw@t@uBfFsL|@uBvHmQN]t@{Bh@cC^yCHoC?gDo@qNPg@bB[z@Sp@WHEL?r@RXNpA\\ZLNNRPLBHHBLCN]j@q@t@Sd@Of@KTq@@aCFI@GHAL@HFFF@nAA?A"},"copyrights":"Map data \u00a92016 Google"},{"bounds":{"northeast":{"lng":115.7843122,"lat":-31.7936889},"southwest":{"lng":115.7496733,"lat":-31.8005683}},"waypoint_order":[],"warnings":[],"summary":"","legs":[{"end_location":{"lng":115.78238,"lat":-31.7991944},"departure_time":{"value":1480499100,"time_zone":"Australia/Perth","text":"5:45pm"},"distance":{"value":3981,"text":"4.0 km"},"arrival_time":{"value":1480499820,"time_zone":"Australia/Perth","text":"5:57pm"},"start_address":"Whitfords Av Before Dampier Av, Hillarys WA 6025","steps":[{"html_instructions":"Bus towards Whitfords Stn","end_location":{"lng":115.78238,"lat":-31.7991944},"distance":{"value":3981,"text":"4.0 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.7496733,"lat":-31.7952256},"polyline":{"points":"d_aaEmjnaULEEYKq@Gg@AYAc@C[EYM]CCAECEAE?G?E?E@GFWBKBa@Aq@?g@@m@TeCLcAP{@RiANm@T_AjA}ELm@b@kBRcANcAL{BB_AAeAMwBUeBOs@sB}IMe@uDiOA?oAiF}@cE]wBEg@E_@GiAEeA?gA?eADkAHeAX}BPcAXeARw@t@uBvBcFnBoE|@uBrCqGDMP_@jCmGHSBE@Ct@{Bh@cCPcALuAB{@DsA@sAAsAEsAEcAKqBWgFHYFMfASZG\\K\\GVGXOBC@AB?BAB?@@B?@?p@RXNpA\\ZLNNPR@AB?B?B@@@B@@@@B@@@B@B?D?B?BABABA@A@IPOTOPa@b@Sd@Of@KTq@@y@Bc@@?T"},"duration":{"value":720,"text":"12 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"462","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=462","text_color":"#000000","color":"#949300"},"arrival_time":{"value":1480499820,"time_zone":"Australia/Perth","text":"5:57pm"},"headsign":"Whitfords Stn","num_stops":8,"arrival_stop":{"name":"Whitfords","location":{"lng":115.78238,"lat":-31.7991944}},"departure_time":{"value":1480499100,"time_zone":"Australia/Perth","text":"5:45pm"},"departure_stop":{"name":"Whitfords Av - Whitfords City Shop Ctre","location":{"lng":115.7496733,"lat":-31.7952256}}}}],"start_location":{"lng":115.7496733,"lat":-31.7952256},"end_address":"Whitfords, Kingsley WA 6026, Australia","via_waypoint":[],"duration":{"value":720,"text":"12 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"d_aaEmjnaULEEYSyAC}@Iu@Wm@AYH_@Fm@AyA@m@TeC^_Cb@wBnBkIv@oDNcAL{B@eCMwBUeBcCqKMe@wDiOoAiF}@cEc@_DE_@MoC?mCNqCj@aEXeARw@t@uBfFsL|@uBvHmQN]t@{Bh@cC^yCHoC?gDo@qNPg@bB[z@Sp@WHEL?r@RXNpA\\ZLNNRPLBHHBLCN]j@q@t@Sd@Of@KTq@@}AD?T"},"copyrights":"Map data \u00a92016 Google"},{"bounds":{"northeast":{"lng":115.7843122,"lat":-31.7936889},"southwest":{"lng":115.7496733,"lat":-31.8005683}},"waypoint_order":[],"warnings":[],"summary":"","legs":[{"end_location":{"lng":115.7822722,"lat":-31.7994017},"departure_time":{"value":1480499520,"time_zone":"Australia/Perth","text":"5:52pm"},"distance":{"value":4070,"text":"4.1 km"},"arrival_time":{"value":1480500180,"time_zone":"Australia/Perth","text":"6:03pm"},"start_address":"Whitfords Av Before Dampier Av, Hillarys WA 6025","steps":[{"html_instructions":"Bus towards Whitfords Stn","end_location":{"lng":115.7822722,"lat":-31.7994017},"distance":{"value":4070,"text":"4.1 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.7496733,"lat":-31.7952256},"polyline":{"points":"d_aaEmjnaULEEYKq@Gg@AYAc@C[EYM]CCAECEAE?G?E?E@GFWBKBa@Aq@?g@@m@TeCLcAP{@RiANm@T_AjA}ELm@b@kBRcANcAL{BB_AAeAMwBUeBOs@sB}IMe@uDiOA?oAiF}@cE]wBEg@E_@GiAEeA?gA?eADkAHeAX}BPcAXeARw@t@uBvBcFnBoE|@uBrCqGDMP_@jCmGHSBE@Ct@{Bh@cCPcALuAB{@DsA@sAAsAEsAEcAKqBWgFHYFMfASZG\\K\\GVGXOBC@AB?BAB?@@B?@?p@RXNpA\\ZLNNPR@AB?B?B@@@B@@@@B@@@B@B?D?B?BABABA@A@IPOTOPa@b@Sd@Of@KTq@@y@BgABI@GHAJ?@@HFFF@nAA?A"},"duration":{"value":660,"text":"11 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"441","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=441","text_color":"#000000","color":"#949300"},"arrival_time":{"value":1480500180,"time_zone":"Australia/Perth","text":"6:03pm"},"headsign":"Whitfords Stn","num_stops":8,"arrival_stop":{"name":"Whitfords","location":{"lng":115.7822722,"lat":-31.7994017}},"departure_time":{"value":1480499520,"time_zone":"Australia/Perth","text":"5:52pm"},"departure_stop":{"name":"Whitfords Av - Whitfords City Shop Ctre","location":{"lng":115.7496733,"lat":-31.7952256}}}}],"start_location":{"lng":115.7496733,"lat":-31.7952256},"end_address":"Whitfords, Kingsley WA 6026, Australia","via_waypoint":[],"duration":{"value":660,"text":"11 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"d_aaEmjnaULEEYSyAC}@Iu@Wm@AYH_@Fm@AyA@m@TeC^_Cb@wBnBkIv@oDNcAL{B@eCMwBUeBcCqKMe@wDiOoAiF}@cEc@_DE_@MoC?mCNqCj@aEXeARw@t@uBfFsL|@uBvHmQN]t@{Bh@cC^yCHoC?gDo@qNPg@bB[z@Sp@WHEL?r@RXNpA\\ZLNNRPLBHHBLCN]j@q@t@Sd@Of@KTq@@aCFI@GHAL@HFFF@nAA?A"},"copyrights":"Map data \u00a92016 Google"},{"bounds":{"northeast":{"lng":115.7843122,"lat":-31.7936889},"southwest":{"lng":115.7499538,"lat":-31.8005683}},"waypoint_order":[],"warnings":["Walking directions are in beta.    Use caution \u2013 This route may be missing sidewalks or pedestrian paths."],"summary":"","legs":[{"end_location":{"lng":115.78238,"lat":-31.7991944},"departure_time":{"value":1480498866,"time_zone":"Australia/Perth","text":"5:41pm"},"distance":{"value":4288,"text":"4.3 km"},"arrival_time":{"value":1480499820,"time_zone":"Australia/Perth","text":"5:57pm"},"start_address":"Whitfords Av Before Dampier Av, Hillarys WA 6025","steps":[{"html_instructions":"Walk to Marmion Av After Cygnet St","end_location":{"lng":115.7543593,"lat":-31.7940348},"distance":{"value":597,"text":"0.6 km"},"travel_mode":"WALKING","steps":[{"html_instructions":"Head <b>east</b> on <b>Whitfords Ave</b> toward <b>Whitfords Ave</b><div style=\"font-size:0.9em\">Go through 1 roundabout</div>","end_location":{"lng":115.753014,"lat":-31.7951594},"distance":{"value":329,"text":"0.3 km"},"travel_mode":"WALKING","start_location":{"lng":115.7499538,"lat":-31.795382},"polyline":{"points":"b`aaEelnaU?AK{@Eg@AQAO?W@[B]A@A@A@A@A@A@A?A@C?A@A?A?C?A?A?AAC?AAA?AAAACCAAAAAA?CAA?CAA?C?A?C?C?A?C?A@CDg@@M@SA[?m@?WDy@FeAHu@"},"duration":{"value":266,"text":"4 mins"}},{"html_instructions":"Turn <b>left</b>","end_location":{"lng":115.7545948,"lat":-31.7949106},"duration":{"value":119,"text":"2 mins"},"travel_mode":"WALKING","start_location":{"lng":115.753014,"lat":-31.7951594},"distance":{"value":160,"text":"0.2 km"},"polyline":{"points":"v~`aEi_oaUOGAAAAAAWiACS?GAE?GEk@ACDwA@U@["},"maneuver":"turn-left"},{"html_instructions":"Turn <b>left</b>","end_location":{"lng":115.7546047,"lat":-31.7948951},"duration":{"value":1,"text":"1 min"},"travel_mode":"WALKING","start_location":{"lng":115.7545948,"lat":-31.7949106},"distance":{"value":2,"text":"2 m"},"polyline":{"points":"d}`aEeioaUAA"},"maneuver":"turn-left"},{"html_instructions":"Turn <b>left</b><div style=\"font-size:0.9em\">Destination will be on the left</div>","end_location":{"lng":115.7543593,"lat":-31.7940348},"duration":{"value":88,"text":"1 min"},"travel_mode":"WALKING","start_location":{"lng":115.7546047,"lat":-31.7948951},"distance":{"value":106,"text":"0.1 km"},"polyline":{"points":"b}`aEgioaUo@RMDUFM@i@?]?C?A?A??@A@?DD@"},"maneuver":"turn-left"}],"start_location":{"lng":115.7499538,"lat":-31.795382},"polyline":{"points":"b`aaEelnaU?AK{@Eg@AQAO?W@[B]A@A@A@A@A@A@A?A@C?A@A?A?C?A?A?AAC?AAA?AAAACCAAAAAA?CAA?CAA?C?A?C?C?A?C?A@CDg@@M@SA[?m@?WDy@FeAHu@OGAAAAAAWiACS?GAE?GEk@ACDwA@U@[AAo@RMDUFM@i@?]?C?A?A??@A@?DD@"},"duration":{"value":474,"text":"8 mins"}},{"html_instructions":"Bus towards Whitfords Stn","end_location":{"lng":115.78238,"lat":-31.7991944},"distance":{"value":3691,"text":"3.7 km"},"travel_mode":"TRANSIT","start_location":{"lng":115.7543593,"lat":-31.7940348},"polyline":{"points":"tw`aEwgoaU?NzA?bADjADl@Yb@a@jA}ELm@b@kBRcANcAL{BB_AAeAMwBUeBOs@sB}IMe@uDiOA?oAiF}@cE]wBEg@E_@GiAEeA?gA?eADkAHeAX}BPcAXeARw@t@uBvBcFnBoE|@uBrCqGDMP_@jCmGHSBE@Ct@{Bh@cCPcALuAB{@DsA@sAAsAEsAEcAKqBWgFHYFMfASZG\\K\\GVGXOBC@AB?BAB?@@B?@?p@RXNpA\\ZLNNPR@AB?B?B@@@B@@@@B@@@B@B?D?B?BABABA@A@IPOTOPa@b@Sd@Of@KTq@@y@Bc@@?T"},"duration":{"value":540,"text":"9 mins"},"transit_details":{"line":{"agencies":[{"name":"Transperth","url":"http://www.transperth.wa.gov.au/"}],"short_name":"463","vehicle":{"name":"Bus","icon":"//maps.gstatic.com/mapfiles/transit/iw2/6/bus2.png","type":"BUS"},"url":"http://www.transperth.wa.gov.au/timetables/details?Bus=463","text_color":"#000000","color":"#949300"},"arrival_time":{"value":1480499820,"time_zone":"Australia/Perth","text":"5:57pm"},"headsign":"Whitfords Stn","num_stops":8,"arrival_stop":{"name":"Whitfords","location":{"lng":115.78238,"lat":-31.7991944}},"departure_time":{"value":1480499280,"time_zone":"Australia/Perth","text":"5:48pm"},"departure_stop":{"name":"Marmion Av After Cygnet St","location":{"lng":115.7543593,"lat":-31.7940348}}}}],"start_location":{"lng":115.7499538,"lat":-31.795382},"end_address":"Whitfords, Kingsley WA 6026, Australia","via_waypoint":[],"duration":{"value":954,"text":"16 mins"},"traffic_speed_entry":[]}],"overview_polyline":{"points":"b`aaEelnaUSwBAg@Dy@GFGDS?SMEW?KJmAAiADqAP{BQICC[}AGaAFmCq@Pc@LyA@EB?DD@?N~CDjADl@Yb@a@jA}ELm@v@oDNcAL{B@eCMwBUeBcCqKMe@wDiOoAiF}@cEc@_DE_@MoC?mCNqCj@aEXeARw@t@uBfFsL|@uBvHmQN]t@{Bh@cC^yCHoC?gDo@qNPg@bB[z@Sp@WHEL?r@RXNpA\\ZLNNRPLBHHBLCN]j@q@t@Sd@Of@KTq@@}AD?T"},"copyrights":"Map data \u00a92016 Google"}]}


];

var mydom = {
    'from-date': document.getElementById('from-date'),
    'to-date': document.getElementById('to-date'),
    'submit': document.getElementById('submit'),
    'reset': document.getElementById('reset'),
    'card-id': document.getElementById('card-id')
}

function startRun() {
    //initialize values...
    function setDateDefault() {
        mydom['from-date'].valueAsDate = new Date(2009, 2, 1);
        mydom['to-date'].valueAsDate = new Date(2009, 2, 1);
    }

    mydom['reset'].addEventListener('click', function (event) {
        // event.preventDefault();
        // setDateDefault();
        // mydom['card-id'].value = "";
        
    });
    setDateDefault();
}

function ajax_get(url, callback) {
    var xhttp;
    xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            callback(this);
        }
    };
    xhttp.open("GET", url, true);
    xhttp.send();
}

function initMap() {
    // Create a map object and specify the DOM element for display.

    var map_option = {
        center: {
            lat: -31.986,
            lng: 115.971
        },
        scrollwheel: true,
        zoom: 11,
        mapTypeId: 'roadmap'
    }
    var map = new google
        .maps
        .Map(document.getElementById('map'), map_option);
    
    window.map=map
    //

    mydom['submit']
    .addEventListener('click', function (event) {
        event.preventDefault();
        var cardId = mydom['card-id'].value;
        // ajax_get('user/' + cardId, function (xhttp) {
        //     console.log(xhttp.responseText);
        // Create a <script> tag and set the USGS URL as the source.
        var script=document.createElement('script');
        // This example uses a local copy of the GeoJSON stored at
        // http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp
        script.text = 'for(var counter=0;counter<sample.length;counter++){renderSingleJson(sample[counter], counter+1)}';
        document.getElementsByTagName('head')[0].appendChild(script);
        });
    // });
}

// Loop through the results array and place a marker for each
// set of coordinates.
// window.displayDataCallback = function(results) {
// for (var i = 0; i < results.features.length; i++) {
//     var coords = results.features[i].geometry.coordinates;
//     var latLng = new google.maps.LatLng(coords[1],coords[0]);
//     var marker = new google.maps.Marker({
//     position: latLng,
//     map: map
//     });
// }
// }



function renderSingleJson(ajson, counter) {

  function randomPickColor() {
        var hexColor = [
            "#ffc0cb",
            "#900090",
            "#051152",
            "#ad5a7a",
            "#f9c780",
            "#5a7aad",
            "#403f51",
            "#e3780a",
            "#00ad06",
            "#461499",
            "#418a14",
            "#794044",
            "#c8ebd0"
        ];
        return hexColor[Math.floor(Math.random() * hexColor.length)];
    }

        function drawLineByEncoded(encoded, color) {
        var decodedPath = google
            .maps
            .geometry
            .encoding
            .decodePath(encoded)
        var apolyline = new google
            .maps
            .Polyline({path: decodedPath, geodesic: true, strokeColor: color, strokeOpacity: 1.0, strokeWeight: 3});
        apolyline.setMap(map);
    }

    // add marker to map
    function addMarker(content, label, lat, lon) {
        var myLatlng = new google
            .maps
            .LatLng(lat, lon);
        var infowindow = new google
            .maps
            .InfoWindow({content: content});
        var marker = new google
            .maps
            .Marker({position: myLatlng, label: label});
        marker.setMap(map);
        marker.addListener('click', function () {
            infowindow.open(map, marker);
        });

    }

        var routes = ajson.routes;
        var origin_start, origin_end;
        var bus_number=[];
        var start_latlon, end_latlon;
        var start_address,end_address;
        var target_line;
        //delete routes with two transit in legs
        for (var i = 0; i < routes.length; i++) {
            var cur_route = routes[i];
            var cur_legs = cur_route.legs;
            var transit_number = 0;
            var final_legs;
            var final_steps;
            for (var j = 0; j < cur_legs.length; j++) {
                var cur_steps = cur_legs[j].steps;
                for (var m = 0; m < cur_steps.length; m++) {
                    if (cur_steps[m]["travel_mode"] == "TRANSIT") {
                        transit_number += 1;
                        final_legs = cur_legs[j];
                        final_steps = cur_steps[m];
                    }
                }
            }
            if (transit_number == 1) {
                final_legs.steps = final_steps;
                routes[i].legs = final_legs;
            } else {
                routes[i] = undefined;
            }
        }
        // console.log(JSON.stringify(routes, null, 2));
        // find out correct routes,filter out routes with legs that are not same with
        // the first one
        for (var i = 0; i < routes.length; i++) {
            cur_route = routes[i];
            cur_steps=cur_route.legs.steps;            
            if (i == 0) {
                start_address = cur_route.legs['start_address'];
                end_address = cur_route.legs['end_address'];
                start_latlon = cur_steps['start_location'];
                end_latlon = cur_steps['end_location'];
                bus_number.push(cur_steps['transit_details']['line']['short_name']);
                target_line=cur_steps.polyline.points;
            } else {
                if (cur_route.legs['start_address'] == start_address && cur_route.legs['end_address'] == end_address) {
                    bus_number.push(cur_steps['transit_details']['line']['short_name']);
                }
            }
        }
        drawLineByEncoded(target_line, randomPickColor());
        console.log(bus_number);
        var start_label='<div>'+start_address+'</div><div>'+bus_number.join('|')+'</div>'+'<div>'+'Latitude: '+start_latlon.lat+', Longitude: '+start_latlon.lng+'</div>';
        var end_label='<div>'+end_address+'</div><div>'+bus_number.join('|')+'</div>'+'<div>'+'Latitude: '+end_latlon.lat+', Longitude: '+end_latlon.lng+'</div>';
        addMarker(start_label, counter.toString()+'S',start_latlon.lat,start_latlon.lng);
        addMarker(end_label, counter.toString()+'E',end_latlon.lat,end_latlon.lng);
    }

startRun();